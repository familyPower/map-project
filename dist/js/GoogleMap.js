/*! project-6 10-12-2016 */
g_callback_AddressFound=void 0,g_callback_AddressProcessed=void 0;var gm=function(){function a(){try{var a=new google.maps.places.PlacesService(k)}catch(a){alert("Unable to retrieve locations for address.")}a?(o._places=[],a.nearbySearch({location:k.center,radius:16e3,types:["park","library","zoo","museum","aquarium"]},b)):alert("Unable to retrieve locations for address.")}function b(a,b,d){return b!==google.maps.places.PlacesServiceStatus.OK?(alert("Retrieve places failed with code: ",google.maps.places.PlacesServiceStatus),google.maps.places.PlacesServiceStatus):(Array.prototype.push.apply(o._places,a),c(a),g_callback_AddressProcessed(),d.hasNextPage&&d.nextPage(),void 0)}function c(){precondition(o._places&&o._places.length>0),g();try{var a=new google.maps.LatLngBounds}catch(a){alert("Unable to create GoogleMap bounds.")}if(a){for(var b,c=0;b=o._places[c];c++){var d={url:b.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};try{var f=new google.maps.Marker({map:k,icon:d,title:b.name,position:b.geometry.location,category:b.types})}catch(a){alert("Unable to create marker.")}if(f)try{f.addListener("click",function(){e(this)})}catch(a){alert("Unable to add listener to marker")}var h="key-"+c;p.push({Key:h,Marker:f}),a.extend(b.geometry.location)}k.fitBounds(a),postcondition(p&&p.length>0)}else alert("Unable to create GoogleMap bounds.")}function d(){var b,c,d;try{var e=new google.maps.Geocoder}catch(a){alert("google.maps.Geocoder failed. Application may not work correctly.")}if(e)try{e.geocode({address:o._address},function(e,f){c=f,d=e,f==google.maps.GeocoderStatus.OK?(b=e[0].geometry.location,o.locationLatlon=e[0].geometry.location,k.setCenter(e[0].geometry.location),k.setZoom(15),a(),g_callback_AddressFound(e[0].formatted_address)):alert("Geocode was not successful for the following reason: "+f)})}catch(a){alert("Google Maps geocoder failed.")}else alert("google.maps.Geocoder failed. Application may not work correctly.")}function e(a){var b=o._selectedMarker,c=q.findMarkerFromMarker(a);assert(c&&"Key"in c),o._selectedMarker=null,b?b&&b.Key==c.Key?(a.getAnimation()==google.maps.Animation.BOUNCE&&q.toggleBounce(b),q.closeInfoWindow(),h(b,close)):b&&b.Key!=c.Key&&(b.Marker.getAnimation()==google.maps.Animation.BOUNCE&&q.toggleBounce(b),q.closeInfoWindow(),h(b,close),o._selectedMarker=c,q.toggleBounce(c),q.populateInfowindow(o._selectedMarker),h(b,open)):(o._selectedMarker=b=c,q.toggleBounce(),q.populateInfowindow(o._selectedMarker),h(b,open))}function f(a){q.toggleBounce(),q.closeInfoWindow(),j(a,close)}function g(){p.length=0,assert(p),postcondition(0==p.length)}var h,j,k,l,m,n,o=this,p=[],q={};q.getAddress=function(){return o._address},q.setAddress=function(a){return a&&a.length>0&&(o._address=a),o._address},q.getMarkersData=function(){precondition(p&&p.length>0);for(var a,b,c,d=[],e=0;e<p.length,c=p[e];e++)assert("Key"in c),assert(c&&c.Marker),1==c.Marker.visible&&(a=c.Marker.title,b=c.Key,d.push({Key:b,PlaceName:a}));return d},q.initMap=function(a){try{k=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(0,0),zoom:20,styles:r(),mapTypeId:"roadmap",mapTypeControl:!1})}catch(a){alert("Unable to initialize GoogleMap. The application will not work properly! Please ensure your internet connection is working.")}if(k){n=new google.maps.LatLngBounds,n||alert("Unable to establish bounds. Map may not function properly."),m=new google.maps.InfoWindow,m||alert("Unable to establish Infowwindows. Location information will not be displayed.");try{google.maps.event.addDomListener(window,"resize",function(){k.fitBounds(n)})}catch(a){alert("Unable to add listener to map.")}q.updateMap(a)}else alert("Unable to initialize GoogleMap. The application will not work properly! Please ensure your internet connection is working.")},q.setBouncingCallback=function(a){precondition(a),h=a},q.setInfoWindowClosedCallback=function(a){j=a},q.updateMap=function(a){if(a&&a.trim().length>0){q.setAddress(a);d(a)}},q.populateInfowindow=function(a){var b,c;"Key"in a?(b=a.Marker,c=a):(assert(a.position.equals(q.getSelectedMarker().Marker.position)),b=q.getSelectedMarker().Marker,c=q.getSelectedMarker()),m?null!=m.marker&&m.marker==b||(m.marker=b,m.setContent("<div>"+b.title+"</div>"),m.open(k,b),m.addListener("closeclick",function(){f(c)})):alert("Unable to initialize InfoWindow.")},q.closeInfoWindow=function(){m.close(),m.marker=null},q.toggleBounce=function(a){precondition(o._selectedMarker||a);var b=a?"Key"in a?a.Marker:a:o._selectedMarker.Marker;b&&b.getAnimation()&&b.getAnimation()==google.maps.Animation.BOUNCE?b.setAnimation(null):b.setAnimation(google.maps.Animation.BOUNCE)},q.clearSelectedMarker=function(){o._selectedMarker=void 0},q.setSelectedMarker=function(a){assert(a.length>0),assert("string"==typeof a);var b=findMarkerInArrayByKey(p,a);return b<0?o._selectedMarker=void 0:o._selectedMarker=p[b],o._selectedMarker},q.findMarkerFromMarker=function(a){var b=findMarkerInArrayByMarker(p,a);if(b>=0)return p[b]},q.getSelectedMarker=function(){return o._selectedMarker?o._selectedMarker:void 0},q.filterMarkers=function(a){assert(p);var b=p;if(b.length>0)for(i=0;i<b.length;i++){var c=b[i].Marker;"all"==a||0===a.length||arrayContains(c.category,a)?c.setVisible(!0):c.setVisible(!1)}};var r=function(){return smapStyles=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}],l};return q}();